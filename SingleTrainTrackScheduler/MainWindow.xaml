<Window x:Class="SingleTrainTrackScheduler.MainWindow"
        Icon="/Assets/Türkiye_Cumhuriyeti_Devlet_Demiryolları_logo.ico"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:oxy="http://oxyplot.org/wpf"
        Title="Single-Track Scheduler (C#)"
        Height="780" Width="1260"
        MinHeight="620" MinWidth="1050"
        WindowStartupLocation="CenterScreen"
        Loaded="Window_Loaded">
    <Grid Margin="12">
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="320"/>
            <ColumnDefinition Width="*"/>
        </Grid.ColumnDefinitions>

        <!-- SOL PANEL -->
        <StackPanel Grid.Column="0">
            <TextBlock Text="Trenler" FontWeight="Bold" Margin="0,0,0,4"/>
            <ListBox x:Name="lstTrains" Height="220" SelectionChanged="LstTrains_SelectionChanged"/>

            <!-- Zaman kaydır -->
            <GroupBox Header="Zaman Kaydır" Margin="0,6,0,0">
                <StackPanel Margin="8">
                    <DockPanel>
                        <TextBlock Text="Δ (dk):" Width="80"/>
                        <TextBox x:Name="txtDelta" Width="60" Text="10"/>
                    </DockPanel>
                    <StackPanel Orientation="Horizontal" HorizontalAlignment="Right" Margin="0,6,0,0" >
                        <Button Content="-" Width="36" Click="BtnShiftMinus_Click" Margin="0,0,6,0"/>
                        <Button Content="+" Width="36" Click="BtnShiftPlus_Click"/>
                    </StackPanel>
                </StackPanel>
            </GroupBox>

            <!-- Dwell -->
            <GroupBox Header="Duruş (dwell) ekle" Margin="0,6,0,0">
                <StackPanel Margin="8">
                    <DockPanel>
                        <TextBlock Text="İstasyon:" Width="80"/>
                        <ComboBox x:Name="cbStation" Width="180"/>
                    </DockPanel>
                    <DockPanel Margin="0,6,0,0">
                        <TextBlock Text="Süre (dk):" Width="80"/>
                        <TextBox x:Name="txtDwell" Width="60" Text="2"/>
                    </DockPanel>
                    <Button Content="Uygula" HorizontalAlignment="Right" Click="BtnApplyDwell_Click" Margin="0,6,0,0"/>
                </StackPanel>
            </GroupBox>

            <!-- Kısa butonlar -->
            <StackPanel Orientation="Horizontal" Margin="0,8,0,0">
                <Button Content="Yeniden Yükle" Click="BtnReload_Click" Margin="0,0,6,0"/>
                <Button Content="Çakışmaları Kontrol Et" Click="BtnConf_Click"/>
            </StackPanel>

            <!-- Gelişmiş / Dışa aktar -->
            <Button x:Name="btnAdvanced" Content="Ayarlar / Dışa Aktar…" Margin="0,8,0,0" Click="BtnAdvanced_Click"/>
            <StackPanel Orientation="Horizontal" Margin="0,6,0,0">
                <Button Content="CSV'ye Aktar" Click="BtnExportCsv_Click" Height="28" Width="110" Margin="0,0,6,0"/>
                <!-- Tek buton: PNG veya PDF seçtirir -->
                <Button x:Name="BtnSaveFigure"
                        Content="Grafiği Kaydet (PNG/PDF)"
                        Click="BtnSavePng_Click"
                        Padding="10,6"/>
            </StackPanel>

            <!-- Özet -->
            <GroupBox Header="Çakışma Özeti" Margin="0,8,0,0">
                <TextBox x:Name="txtConfMain"
                         Margin="6" Height="160"
                         VerticalScrollBarVisibility="Auto"
                         AcceptsReturn="True"
                         FontFamily="Consolas"/>
            </GroupBox>
        </StackPanel>

        <!-- SAĞ: GRAFİK + alt bar -->
        <Grid Grid.Column="1">
            <Grid.RowDefinitions>
                <RowDefinition Height="*"/>
                <RowDefinition Height="42"/>
            </Grid.RowDefinitions>

            <!-- OxyPlot -->
            <oxy:PlotView x:Name="plotView" Grid.Row="0"/>

            <!-- Alt bar -->
            <StackPanel Grid.Row="1" Orientation="Horizontal" HorizontalAlignment="Center" >
                <Button Content="◀ 30 dk" Click="PanLeft_Click" Margin="2,0"/>
                <Button Content="30 dk ▶" Click="PanRight_Click" Margin="2,0"/>
                <Button Content="↑ 5 km" Click="PanUp_Click" Margin="12,0,2,0"/>
                <Button Content="↓ 5 km" Click="PanDown_Click" Margin="2,0"/>
                <Button Content="Zoom +" Click="ZoomIn_Click" Margin="12,0,2,0"/>
                <Button Content="Zoom −" Click="ZoomOut_Click" Margin="2,0"/>
                <Button Content="↻ Reset (12 saat)" Click="ResetView_Click" Margin="12,0,2,0"/>
                <Button Content="Optimize (C#)" Click="BtnOptimize_Click" Margin="12,0,0,0"/>
            </StackPanel>
        </Grid>
    </Grid>
</Window>
